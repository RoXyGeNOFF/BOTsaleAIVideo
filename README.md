# Veo3 Telegram Bot

## Описание

Veo3 Bot — Telegram-бот для генерации видео по тексту с помощью искусственного интеллекта Veo3. Бот поддерживает очередь генерации, прогресс-бар, оплату через ЮKassa и YooMoney, админ-панель с авторизацией, историю платежей и аналитику. Все секреты хранятся в .env.

---

## Архитектура

- **aiogram** — Telegram-бот (handlers.py)
- **Flask** — вебхуки и админ-панель (payment.py)
- **PostgreSQL** — хранение пользователей и платежей
- **Redis + Celery** — очередь генерации видео
- **SQLAlchemy** — ORM для работы с БД
- **service.py, data.py, external_api.py** — слои бизнес-логики, работы с БД и внешними API
- **pytest, GitHub Actions** — тесты и CI/CD

---

## Возможности

- Генерация видео по тексту через Veo3 API
- Бесплатные генерации для новых пользователей
- Покупка видео по тарифам (1, 2, 3, 4 видео)
- Оплата через ЮKassa и YooMoney
- Очередь генерации и прогресс-бар
- Хранение истории платежей и аналитика
- Админ-панель с авторизацией
- Команды /faq и /support

---

## Команды бота

- `/start` — приветствие, проверка подписки
- `/buy` — выбор тарифа и оплата
- `/faq` — часто задаваемые вопросы
- `/support` — поддержка
- Любой текст — генерация видео (если есть лимит)

---

## FAQ

1. Как работает бот? — Вы отправляете текст, бот генерирует видео с помощью ИИ.
2. Сколько стоит генерация? — Первые 3 видео бесплатно, далее — по тарифу.
3. Как оплатить? — Через ЮKassa или YooMoney, команда /buy.
4. Куда обращаться за поддержкой? — /support

---

## Переменные окружения

Создайте файл `.env` в корне и укажите:

```
BOT_TOKEN=ваш_токен_бота
VEO3_API_KEY=ваш_ключ_veo3
YOOKASSA_SHOP_ID=shop_id
YOOKASSA_API_KEY=api_key
DOMAIN=https://your.domain
YOOMONEY_WALLET=номер_кошелька
CHANNEL_USERNAME=@yourchannel
ADMIN_USER=admin
ADMIN_PASS=yourpassword
DATABASE_URL=postgresql+psycopg2://veo3user:veo3pass@db:5432/veo3
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/0
```

---

## Запуск

1. Клонируйте репозиторий
2. Заполните .env
3. Запустите `docker-compose up --build`
4. Бот и админка будут работать в отдельных контейнерах

---

## Тесты и CI/CD

- Для запуска тестов: `pytest`
- Автоматический запуск тестов при пуше через GitHub Actions

---

## Поддержка

По вопросам и предложениям пишите: https://t.me/RoXyGeNOFF